using Pck;
using System;
using System.Collections.Generic;
using System.IO;
using CharFA = Pck.CharFA<string>;
class Program
{
	static string[] _tests = new string[] {
	@"(""([^""\\]|\\.)*"")",		// 1
	@"\'([^\'\\]|\\.)*\'",		// 2
	@"([A-Z_a-z][\-0-9A-Z_a-z]*)",	// 3
	@"(\-?[0-9]+)",					// 4
	@"(( |(\v|(\f|(\t|(\r|\n))))))+",//5
	@"(//[^\n]*[\n])",				// 6
	@"/\*",							// 7
	@"\|",							// 8
	@"\}\+"							// 9
	};


	static void Main(string[] args)
	{
		//_TestXbnfTokenizers(args);
		//foreach (var test in _tests)
		//	Console.WriteLine(RegexExpression.Parse(test));
		//_RunLL(args);
		//_RunLalr(args);	
		_RunXbnfGenerated(args);
		_RunLalrXbnf(args);
	}
	static void _TestXbnfTokenizers(string[] args)
	{
		var cfg = CfgDocument.ReadFrom(@"..\..\..\xbnf.pck");
		var lex = LexDocument.ReadFrom(@"..\..\..\xbnf.pck");
		string input = null;
		using (var sr = File.OpenText(@"..\..\..\xbnf.xbnf"))
			input = sr.ReadToEnd();
		var tokenizer1 = lex.ToTokenizer(input, cfg.EnumSymbols());
		var tokenizer2 = tokenizer1;// new XbnfTokenizer(input);
		var t1 = new List<Token>(tokenizer1);
		var t2 = new List<Token>(tokenizer2);
		if (t1.Count != t2.Count)
			Console.Error.WriteLine("Counts are different.");
		for(int ic=t1.Count,i=0;i<ic;++i)
		{
			if(!Equals(t1[i],t2[i]))
			{
				Console.Error.WriteLine("at index {0}", i);
				Console.Error.WriteLine(t1[i]);
				Console.Error.WriteLine(t2[i]);
				break;
			}
		}
		
	}
	static void _RunXbnfGenerated(string[] args)
	{
		var cfg = CfgDocument.ReadFrom(@"..\..\..\xbnf.pck");
		var lex = LexDocument.ReadFrom(@"..\..\..\xbnf.pck");
		var tokenizer = new XbnfTokenizer(new FileReaderEnumerable(@"..\..\..\xbnf.xbnf"));
		var parser = new XbnfParser(tokenizer);
		parser.ShowHidden = true;
		while (LRNodeType.EndDocument != parser.NodeType)
			Console.WriteLine(parser.ParseReductions(true));

	}
	static void _RunLL(string[] args)
	{
		var cfg = CfgDocument.ReadFrom(@"..\..\..\expr.ll1.pck");
		var lex = LexDocument.ReadFrom(@"..\..\..\expr.ll1.pck");
		var tokenizer = lex.ToTokenizer("3+4*(2+1+1)"/*new FileReaderEnumerable(@"..\..\..\xbnf.xbnf")*/, cfg.FillSymbols());
		var parser = cfg.ToLL1Parser(tokenizer); //new LL1DebugParser(cfg,tokenizer);
		parser.ShowHidden = true;
		while (LLNodeType.EndDocument != parser.NodeType)
			Console.WriteLine(parser.ParseSubtree(true));

	}
	static void _RunLalrXbnf(string[] args)
	{
		var cfg = CfgDocument.ReadFrom(@"..\..\..\xbnf.pck");
		var lex = LexDocument.ReadFrom(@"..\..\..\xbnf.pck");
		var tokenizer = lex.ToTokenizer(new FileReaderEnumerable(@"..\..\..\xbnf.xbnf"), cfg.EnumSymbols());
		//var pt = cfg.ToLalr1ParseTable();// new _ConsoleProgress());
		var parser = cfg.ToLalr1Parser(tokenizer); //new Lalr1DebugParser(cfg, tokenizer, pt);

		/*parser.ShowHidden =false;
		while (parser.Read())
		{
			Console.WriteLine("{0}: {1}, {2} {3}", parser.NodeType, parser.Symbol, parser.Value,parser.Rule);
		}
		parser = new DebugLalr1Parser(cfg, tokenizer, pt);
		*/
		parser.ShowHidden = true;
		while (LRNodeType.EndDocument != parser.NodeType)
			Console.WriteLine(parser.ParseReductions(true));

	}
	static void _RunLalr(string[] args)
	{
		var cfg = CfgDocument.ReadFrom(@"..\..\..\expr.pck");
		var lex = LexDocument.ReadFrom(@"..\..\..\expr.pck");
		var tokenizer =lex.ToTokenizer("3+4*(2+1+1)"/*new FileReaderEnumerable(@"..\..\..\data.json")*/, cfg.EnumSymbols());
		//var pt = cfg.ToLalr1ParseTable();// new _ConsoleProgress());
		var parser = cfg.ToLalr1Parser(tokenizer); //new Lalr1DebugParser(cfg, tokenizer, pt);
		
		/*parser.ShowHidden =false;
		while (parser.Read())
		{
			Console.WriteLine("{0}: {1}, {2} {3}", parser.NodeType, parser.Symbol, parser.Value,parser.Rule);
		}
		parser = new DebugLalr1Parser(cfg, tokenizer, pt);
		*/
		parser.ShowHidden =true;
		while (LRNodeType.EndDocument != parser.NodeType)
			Console.WriteLine(parser.ParseReductions(true));

		return;
	}
	static string[] _Symbols = new string[] {
			"grammar",
			"productions",
			"production",
			"expressions",
			"expression",
			"symbol",
			"attributes",
			"attribute",
			"attrvalue",
			"expressionlisttail",
			"symbollist",
			"attributelisttail",
			"identifier",
			"lt",
			"gt",
			"eq",
			"semi",
			"literal",
			"regex",
			"lparen",
			"rparen",
			"lbracket",
			"rbracket",
			"lbrace",
			"rbrace",
			"rbracePlus",
			"integer",
			"or",
			"comma",
			"whitespace",
			"lineComment",
			"blockComment",
			"#EOS",
			"#ERROR"};
	#region Parse Table
	static int[][][] _ParseTable = new int[][][] {
			new int[][] {
					new int[] {
							1},
					new int[] {
							2},
					new int[] {
							3},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							5},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							-1}},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							0,
							0,
							1}},
			new int[][] {
					null,
					new int[] {
							4},
					new int[] {
							3},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							5},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							2,
							1,
							2}},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							1,
							1,
							2,
							1}},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							6},
					null,
					new int[] {
							46},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							7},
					new int[] {
							34},
					null,
					null,
					null,
					null,
					new int[] {
							38},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							8},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							9},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					new int[] {
							10},
					new int[] {
							12},
					new int[] {
							24},
					null,
					null,
					null,
					null,
					new int[] {
							16},
					null,
					new int[] {
							20},
					null,
					null,
					null,
					null,
					new int[] {
							18},
					new int[] {
							19},
					new int[] {
							21},
					null,
					new int[] {
							25},
					null,
					new int[] {
							28},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							11},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							3,
							2,
							12,
							13,
							6,
							14,
							15,
							3,
							16},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							3,
							2,
							12,
							13,
							6,
							14,
							15,
							3,
							16}},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							13},
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							6,
							3,
							4},
					null,
					null,
					null,
					new int[] {
							6,
							3,
							4},
					null,
					new int[] {
							6,
							3,
							4},
					null,
					new int[] {
							6,
							3,
							4},
					new int[] {
							6,
							3,
							4},
					null,
					new int[] {
							32},
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							5,
							3,
							4,
							9},
					null,
					null,
					null,
					new int[] {
							5,
							3,
							4,
							9},
					null,
					new int[] {
							5,
							3,
							4,
							9},
					null,
					new int[] {
							5,
							3,
							4,
							9},
					new int[] {
							5,
							3,
							4,
							9},
					null,
					new int[] {
							14},
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					new int[] {
							15},
					new int[] {
							24},
					null,
					null,
					null,
					null,
					new int[] {
							16},
					null,
					new int[] {
							20},
					null,
					null,
					null,
					null,
					new int[] {
							18},
					new int[] {
							19},
					new int[] {
							21},
					null,
					new int[] {
							25},
					null,
					new int[] {
							28},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							23,
							9,
							9,
							27,
							4},
					null,
					null,
					null,
					new int[] {
							23,
							9,
							9,
							27,
							4},
					null,
					new int[] {
							23,
							9,
							9,
							27,
							4},
					null,
					new int[] {
							23,
							9,
							9,
							27,
							4},
					new int[] {
							23,
							9,
							9,
							27,
							4},
					null,
					new int[] {
							23,
							9,
							9,
							27,
							4},
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					new int[] {
							17},
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							20},
					null,
					null,
					null,
					new int[] {
							7,
							4,
							10},
					new int[] {
							18},
					new int[] {
							19},
					new int[] {
							21},
					new int[] {
							7,
							4,
							10},
					new int[] {
							25},
					new int[] {
							7,
							4,
							10},
					new int[] {
							28},
					new int[] {
							7,
							4,
							10},
					new int[] {
							7,
							4,
							10},
					null,
					new int[] {
							7,
							4,
							10},
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							25,
							10,
							10,
							5},
					null,
					null,
					null,
					new int[] {
							25,
							10,
							10,
							5},
					new int[] {
							25,
							10,
							10,
							5},
					new int[] {
							25,
							10,
							10,
							5},
					new int[] {
							25,
							10,
							10,
							5},
					new int[] {
							25,
							10,
							10,
							5},
					new int[] {
							25,
							10,
							10,
							5},
					new int[] {
							25,
							10,
							10,
							5},
					new int[] {
							25,
							10,
							10,
							5},
					new int[] {
							25,
							10,
							10,
							5},
					new int[] {
							25,
							10,
							10,
							5},
					null,
					new int[] {
							25,
							10,
							10,
							5},
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							9,
							5,
							17},
					null,
					null,
					null,
					new int[] {
							9,
							5,
							17},
					new int[] {
							9,
							5,
							17},
					new int[] {
							9,
							5,
							17},
					new int[] {
							9,
							5,
							17},
					new int[] {
							9,
							5,
							17},
					new int[] {
							9,
							5,
							17},
					new int[] {
							9,
							5,
							17},
					new int[] {
							9,
							5,
							17},
					new int[] {
							9,
							5,
							17},
					new int[] {
							9,
							5,
							17},
					null,
					new int[] {
							9,
							5,
							17},
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							10,
							5,
							18},
					null,
					null,
					null,
					new int[] {
							10,
							5,
							18},
					new int[] {
							10,
							5,
							18},
					new int[] {
							10,
							5,
							18},
					new int[] {
							10,
							5,
							18},
					new int[] {
							10,
							5,
							18},
					new int[] {
							10,
							5,
							18},
					new int[] {
							10,
							5,
							18},
					new int[] {
							10,
							5,
							18},
					new int[] {
							10,
							5,
							18},
					new int[] {
							10,
							5,
							18},
					null,
					new int[] {
							10,
							5,
							18},
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							11,
							5,
							12},
					null,
					null,
					null,
					new int[] {
							11,
							5,
							12},
					new int[] {
							11,
							5,
							12},
					new int[] {
							11,
							5,
							12},
					new int[] {
							11,
							5,
							12},
					new int[] {
							11,
							5,
							12},
					new int[] {
							11,
							5,
							12},
					new int[] {
							11,
							5,
							12},
					new int[] {
							11,
							5,
							12},
					new int[] {
							11,
							5,
							12},
					new int[] {
							11,
							5,
							12},
					null,
					new int[] {
							11,
							5,
							12},
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					new int[] {
							22},
					new int[] {
							12},
					new int[] {
							24},
					null,
					null,
					null,
					null,
					new int[] {
							16},
					null,
					new int[] {
							20},
					null,
					null,
					null,
					null,
					new int[] {
							18},
					new int[] {
							19},
					new int[] {
							21},
					null,
					new int[] {
							25},
					null,
					new int[] {
							28},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							23},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							12,
							5,
							19,
							3,
							20},
					null,
					null,
					null,
					new int[] {
							12,
							5,
							19,
							3,
							20},
					new int[] {
							12,
							5,
							19,
							3,
							20},
					new int[] {
							12,
							5,
							19,
							3,
							20},
					new int[] {
							12,
							5,
							19,
							3,
							20},
					new int[] {
							12,
							5,
							19,
							3,
							20},
					new int[] {
							12,
							5,
							19,
							3,
							20},
					new int[] {
							12,
							5,
							19,
							3,
							20},
					new int[] {
							12,
							5,
							19,
							3,
							20},
					new int[] {
							12,
							5,
							19,
							3,
							20},
					new int[] {
							12,
							5,
							19,
							3,
							20},
					null,
					new int[] {
							12,
							5,
							19,
							3,
							20},
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							26,
							10,
							5},
					null,
					null,
					null,
					new int[] {
							26,
							10,
							5},
					new int[] {
							26,
							10,
							5},
					new int[] {
							26,
							10,
							5},
					new int[] {
							26,
							10,
							5},
					new int[] {
							26,
							10,
							5},
					new int[] {
							26,
							10,
							5},
					new int[] {
							26,
							10,
							5},
					new int[] {
							26,
							10,
							5},
					new int[] {
							26,
							10,
							5},
					new int[] {
							26,
							10,
							5},
					null,
					new int[] {
							26,
							10,
							5},
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					new int[] {
							26},
					new int[] {
							12},
					new int[] {
							24},
					null,
					null,
					null,
					null,
					new int[] {
							16},
					null,
					new int[] {
							20},
					null,
					null,
					null,
					null,
					new int[] {
							18},
					new int[] {
							19},
					new int[] {
							21},
					null,
					new int[] {
							25},
					null,
					new int[] {
							28},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							27},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							13,
							5,
							21,
							3,
							22},
					null,
					null,
					null,
					new int[] {
							13,
							5,
							21,
							3,
							22},
					new int[] {
							13,
							5,
							21,
							3,
							22},
					new int[] {
							13,
							5,
							21,
							3,
							22},
					new int[] {
							13,
							5,
							21,
							3,
							22},
					new int[] {
							13,
							5,
							21,
							3,
							22},
					new int[] {
							13,
							5,
							21,
							3,
							22},
					new int[] {
							13,
							5,
							21,
							3,
							22},
					new int[] {
							13,
							5,
							21,
							3,
							22},
					new int[] {
							13,
							5,
							21,
							3,
							22},
					new int[] {
							13,
							5,
							21,
							3,
							22},
					null,
					new int[] {
							13,
							5,
							21,
							3,
							22},
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					new int[] {
							29},
					new int[] {
							12},
					new int[] {
							24},
					null,
					null,
					null,
					null,
					new int[] {
							16},
					null,
					new int[] {
							20},
					null,
					null,
					null,
					null,
					new int[] {
							18},
					new int[] {
							19},
					new int[] {
							21},
					null,
					new int[] {
							25},
					null,
					new int[] {
							28},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							30},
					new int[] {
							31},
					null,
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							14,
							5,
							23,
							3,
							24},
					null,
					null,
					null,
					new int[] {
							14,
							5,
							23,
							3,
							24},
					new int[] {
							14,
							5,
							23,
							3,
							24},
					new int[] {
							14,
							5,
							23,
							3,
							24},
					new int[] {
							14,
							5,
							23,
							3,
							24},
					new int[] {
							14,
							5,
							23,
							3,
							24},
					new int[] {
							14,
							5,
							23,
							3,
							24},
					new int[] {
							14,
							5,
							23,
							3,
							24},
					new int[] {
							14,
							5,
							23,
							3,
							24},
					new int[] {
							14,
							5,
							23,
							3,
							24},
					new int[] {
							14,
							5,
							23,
							3,
							24},
					null,
					new int[] {
							14,
							5,
							23,
							3,
							24},
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							15,
							5,
							23,
							3,
							25},
					null,
					null,
					null,
					new int[] {
							15,
							5,
							23,
							3,
							25},
					new int[] {
							15,
							5,
							23,
							3,
							25},
					new int[] {
							15,
							5,
							23,
							3,
							25},
					new int[] {
							15,
							5,
							23,
							3,
							25},
					new int[] {
							15,
							5,
							23,
							3,
							25},
					new int[] {
							15,
							5,
							23,
							3,
							25},
					new int[] {
							15,
							5,
							23,
							3,
							25},
					new int[] {
							15,
							5,
							23,
							3,
							25},
					new int[] {
							15,
							5,
							23,
							3,
							25},
					new int[] {
							15,
							5,
							23,
							3,
							25},
					null,
					new int[] {
							15,
							5,
							23,
							3,
							25},
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					new int[] {
							33},
					new int[] {
							24},
					null,
					null,
					null,
					null,
					new int[] {
							16},
					null,
					new int[] {
							20},
					null,
					null,
					null,
					null,
					new int[] {
							18},
					new int[] {
							19},
					new int[] {
							21},
					null,
					new int[] {
							25},
					null,
					new int[] {
							28},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							24,
							9,
							27,
							4},
					null,
					null,
					null,
					new int[] {
							24,
							9,
							27,
							4},
					null,
					new int[] {
							24,
							9,
							27,
							4},
					null,
					new int[] {
							24,
							9,
							27,
							4},
					new int[] {
							24,
							9,
							27,
							4},
					null,
					new int[] {
							24,
							9,
							27,
							4},
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							35},
					null,
					null,
					new int[] {
							17,
							6,
							7},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							44},
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							16,
							6,
							7,
							11},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							36},
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							37},
					null,
					null,
					null,
					null,
					new int[] {
							38},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							27,
							11,
							11,
							28,
							7},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							27,
							11,
							11,
							28,
							7},
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							19,
							7,
							12},
					new int[] {
							39},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							19,
							7,
							12},
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							40},
					null,
					null,
					null,
					new int[] {
							43},
					null,
					null,
					null,
					null,
					new int[] {
							41},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							42},
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							18,
							7,
							12,
							15,
							8},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							18,
							7,
							12,
							15,
							8},
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							20,
							8,
							17},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							20,
							8,
							17},
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							21,
							8,
							26},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							21,
							8,
							26},
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							22,
							8,
							12},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							22,
							8,
							12},
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							45},
					null,
					null,
					null,
					null,
					new int[] {
							38},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							28,
							11,
							28,
							7},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							28,
							11,
							28,
							7},
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					new int[] {
							47},
					new int[] {
							12},
					new int[] {
							24},
					null,
					null,
					null,
					null,
					new int[] {
							16},
					null,
					new int[] {
							20},
					null,
					null,
					null,
					null,
					new int[] {
							18},
					new int[] {
							19},
					new int[] {
							21},
					null,
					new int[] {
							25},
					null,
					new int[] {
							28},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							48},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null},
			new int[][] {
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							4,
							2,
							12,
							15,
							3,
							16},
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					new int[] {
							4,
							2,
							12,
							15,
							3,
							16}}};
	#endregion
	static int[] _NodeFlags = new int[] {
			0,
			1,
			0,
			1,
			0,
			0,
			1,
			0,
			0,
			1,
			1,
			1,
			0,
			0,
			0,
			0,
			0,
			0,
			0,
			0,
			0,
			0,
			0,
			0,
			0,
			0,
			0,
			0,
			0,
			2,
			2,
			2,
			0,
			0};
	static int[] _Substitutions = new int[] {
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1,
			-1};
	class _ConsoleProgress : IProgress<Lalr1Progress>
	{
		public void Report(Lalr1Progress progress)
		{
			switch(progress.Status)
			{
				case Lalr1Status.ComputingClosure:
				case Lalr1Status.ComputingMove:
				case Lalr1Status.ComputingConfigurations:
				case Lalr1Status.CreatingLookaheadGrammar:
					break;
				default:
					Console.Error.WriteLine("{0}: {1}", progress.Status, progress.Count);
					break;
			}
			
		}
		
	}
}

